import { Component } from 'react';
import Avatar from 'Components/Avatar';
import ImageUpload from 'Services/ImageUpload';
import './_Background.scss';

export default class Background extends Component {
  constructor(props) {
    super(props);
    this.input = null;
    this.setInput = this.setInput.bind(this);
    this.onChange = this.onChange.bind(this);
  }

  componentDidMount() {
    if (!ImageUpload.signature) {
      ImageUpload.getSignature();
    }
  }

  shouldComponentUpdate() {
    return false;
  }

  onChange(e) {
    const { files } = e.target;
    if (files.length && files[0]) {
      ImageUpload.upload(files[0]);
      if (this.input) {
        this.input.value = '';
      }
    }
  }

  setInput(c) {
    this.input = c;
  }

  render() {
    return (
      <div className='profile-background'>
        <div className='overlay' />
        <Avatar fill='rgb(255, 219, 172)' />
        <form
          className='photo-upload'
          tabIndex={1}>
          <svg
            xmlns='http://www.w3.org/2000/svg'
            viewBox='0 0 90 112.5'
            fill='none'
            x='0px'
            y='0px'>
            <path d='M79.8678 76.2731H10.1325C7.30228 76.2731 5 73.9709 5 71.141V24.7145C5 21.8847 7.30228 19.582 10.1325 19.582H79.8678C82.6976 19.582 85 21.8847 85 24.7145V71.141C85.0004 73.9709 82.698 76.2731 79.8678 76.2731ZM10.1325 22.3838C8.8473 22.3838 7.80163 23.4293 7.80163 24.7145V71.141C7.80163 72.4262 8.8473 73.4718 10.1325 73.4718H79.8678C81.153 73.4718 82.1986 72.4262 82.1986 71.141V24.7145C82.1986 23.4293 81.153 22.3838 79.8678 22.3838H10.1325Z' />
            <path d='M29.7049 22.384H13.0461V17.0288C13.0461 15.359 14.4047 14 16.0745 14H26.6762C28.346 14 29.7049 15.3586 29.7049 17.0288V22.384ZM15.8478 19.582H26.9036V17.0285C26.9036 16.9033 26.8017 16.8014 26.6765 16.8014H16.0749C15.9497 16.8014 15.8478 16.9033 15.8478 17.0285V19.582Z' />
            <path d='M56.5268 68.5516C51.016 68.5516 45.8349 66.4054 41.9379 62.5088C38.0413 58.6122 35.8955 53.4312 35.8955 47.9204C35.8955 42.4096 38.0417 37.2284 41.9379 33.3319C45.8349 29.4353 51.016 27.2891 56.5268 27.2891C62.0376 27.2891 67.2187 29.4353 71.1153 33.3319C75.0123 37.2284 77.1581 42.4096 77.1581 47.9204C77.1581 53.4312 75.0119 58.6122 71.1153 62.5088C67.2187 66.4054 62.0376 68.5516 56.5268 68.5516ZM56.5268 30.0904C46.6956 30.0904 38.6971 38.0889 38.6971 47.9204C38.6971 57.752 46.6956 65.7505 56.5268 65.7505C66.358 65.7505 74.3564 57.752 74.3564 47.9204C74.3564 38.0889 66.3583 30.0904 56.5268 30.0904Z' />
            <path d='M56.5267 61.5145C49.0313 61.5145 42.9336 55.4164 42.9336 47.9214C42.9336 40.4264 49.0317 34.3281 56.5267 34.3281C64.0217 34.3281 70.1199 40.4264 70.1199 47.9214C70.1199 55.4164 64.0221 61.5145 56.5267 61.5145ZM56.5267 37.1295C50.5763 37.1295 45.7352 41.9707 45.7352 47.9211C45.7352 53.8714 50.5763 58.7124 56.5267 58.7124C62.4771 58.7124 67.3182 53.8714 67.3182 47.9211C67.3182 41.9707 62.4771 37.1295 56.5267 37.1295Z' />
            <path d='M26.0798 34.9506C23.6098 34.9506 21.5996 32.9408 21.5996 30.4704C21.5996 28.0004 23.6094 25.9902 26.0798 25.9902C28.5502 25.9902 30.5603 28.0004 30.5603 30.4704C30.56 32.9408 28.5502 34.9506 26.0798 34.9506ZM26.0798 28.792C25.1544 28.792 24.4012 29.5447 24.4012 30.4704C24.4012 31.3962 25.1544 32.1489 26.0798 32.1489C27.0055 32.1489 27.7586 31.3962 27.7586 30.4704C27.7586 29.5447 27.0055 28.792 26.0798 28.792Z' />
            <path d='M28.2843 63.4316H14.4634V66.2328H28.2843V63.4316Z' />
          </svg>
          <input
            ref={this.setInput}
            type='file'
            name='img'
            accept='image/*'
            onChange={this.onChange} />
        </form>
      </div>
    )
  }
}